<th:block th:fragment="sidebar(widgets)" th:if="${not #lists.isEmpty(widgets)}">
    <div id="secondary" class="widget-area" role="complementary">
        <div id="sidebar-top" class="widget-area-top">
            <th:block th:each="widget_data,iterStat : ${widgets}">
                <th:block th:unless="${widget_data.widget=='custom_html'}">
                    <th:block th:replace="~{'modules/widgets/sidebar/'+ ${widget_data.widget}}" />
                </th:block>
                <th:block th:if="${widget_data.widget=='custom_html'}">
                    <th:block th:replace="~{modules/widgets/sidebar/custom_html :: custom_html(${widget_data})}" />
                </th:block>
            </th:block>
        </div>
    </div>
    <div class="clear"></div>
</th:block>